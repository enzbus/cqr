name: Test

# env:
#   # https://github.com/actions/runner-images
#   # last 2 are aarch64 and amd64
#   OSS: [ubuntu-latest, windows-latest, macos-latest, macos-13]

on:

  push:
    branches:
      - master

  pull_request:
    branches:
      - master

jobs:

  pip_editable_install:

    runs-on: ${{ matrix.os }}

    strategy:
      matrix:
        os:  [ubuntu-latest, windows-latest, macos-latest, macos-13]

    steps:

      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
            python-version: '3.11'

      - name: Editable install
        run: python -m pip install -v -e .

      - name: Test
        run: python -m project_euromir.tests

  pip_install:

    runs-on: ${{ matrix.os }}

    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest, macos-13]

    steps:

      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
            python-version: '3.11'

      - name: Pip install and remove repo
        run: |
              python -m pip install -v .
              rm -rf *

      - name: Test
        run: python -m project_euromir.tests